<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Servile : Convenience wrapper &#8212; SERV  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=12dfc556" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="https://wavedrom.com/skins/default.js"></script>
    <script src="https://wavedrom.com/wavedrom.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="servile-convenience-wrapper">
<h1>Servile : Convenience wrapper<a class="headerlink" href="#servile-convenience-wrapper" title="Link to this heading">¶</a></h1>
<figure class="align-default" id="id1">
<img alt="_images/servile.png" src="_images/servile.png" />
<figcaption>
<p><span class="caption-text">Servile convenience wrapper</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>Servile is a helper component that takes care of common configuration and is used as a building block in the other designs and subsystems. It exposes a memory bus intended to be connected to a combined data and instruction memory, an extension bus for peripheral controllers and accelerators and an RF interface for connecting to an SRAM for GPR and CSR registers.</p>
<figure class="align-default" id="id2">
<img alt="_images/servile_int.png" src="_images/servile_int.png" />
<figcaption>
<p><span class="caption-text">Servile block diagram</span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>Internally, Servile contains logic for optionally instantiating an MDU core for the M extension, an arbiter to route instruction fetches and main memory accesses through the same interface and a mux to split up the memory map into memory (0x00000000-0x3FFFFFFF) and external accesses (0x40000000-0xFFFFFFFF). The mux also contains simulation-only logic to write output to a log file and stop the simulation.</p>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Link to this heading">¶</a></h2>
<table class="docutils align-default" id="id3">
<caption><span class="caption-text">Parameters</span><a class="headerlink" href="#id3" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 9.1%" />
<col style="width: 18.2%" />
<col style="width: 72.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Values</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>reset_pc</p></td>
<td><p>0x00000000 (default) - 0xFFFFFFFC</p></td>
<td><p>Address of first instruction to fetch from memory after reset (Reset vector)</p></td>
</tr>
<tr class="row-odd"><td><p>reset_strategy</p></td>
<td><p>“MINI” (default), “NONE”</p></td>
<td><div class="line-block">
<div class="line">Amount of reset applied to design</div>
<div class="line">“NONE” : No reset at all. Relies on a POR to set correct initialization values and that core isn’t reset during runtime</div>
<div class="line">“MINI” : Standard setting. Resets the minimal amount of FFs needed to restart execution from the instruction at RESET_PC.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>rf_width</p></td>
<td><p>2 (default), 4, 8, 16, 32</p></td>
<td><p>Width of the data bus to the RF memory. Typically smaller values use less resources, but can be implementation-dependant.</p></td>
</tr>
<tr class="row-odd"><td><p>sim</p></td>
<td><p>0 (default), 1</p></td>
<td><div class="line-block">
<div class="line">Enable simulation mode. In simulation mode, two memory addresses have special purposes.</div>
<div class="line">0x80000000: Writes to this address puts the byte in the lowest data byte into a log file decided by the “signature” plusarg.</div>
<div class="line">0x90000000: Writes to this address ends the simulation.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>with_c</p></td>
<td><p>0 (default), 1</p></td>
<td><p>Enable the C extension. This also makes SERV support misaligned loads and stores.</p></td>
</tr>
<tr class="row-odd"><td><p>with_csr</p></td>
<td><p>0 (default), 1</p></td>
<td><p>Enable the Zicsr extension. This also enables timer IRQ and exception handling. Note that SERV only implements a small subset of the CSR registers.</p></td>
</tr>
<tr class="row-even"><td><p>with_mdu</p></td>
<td><p>0 (default), 1</p></td>
<td><p>Enables the Multiplication and Division Unit (MDU) to support the M extension. Note that this only enables the interface and the decoder logic. The MDU itself is external from SERV.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="signals">
<h2>Signals<a class="headerlink" href="#signals" title="Link to this heading">¶</a></h2>
<table class="docutils align-default" id="id4">
<caption><span class="caption-text">Signals</span><a class="headerlink" href="#id4" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 25.0%" />
<col style="width: 8.3%" />
<col style="width: 4.2%" />
<col style="width: 62.5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Signal</p></th>
<th class="head"><p>Width</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>i_clk</p></td>
<td><p>1</p></td>
<td><p>in</p></td>
<td><p>Clock</p></td>
</tr>
<tr class="row-odd"><td><p>i_rst</p></td>
<td><p>1</p></td>
<td><p>in</p></td>
<td><p>Synchronous reset</p></td>
</tr>
<tr class="row-even"><td><p>i_timer_irq</p></td>
<td><p>1</p></td>
<td><p>in</p></td>
<td><p>Timer interrupt</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Memory interface</strong></p></td>
<td></td>
<td></td>
<td><p>Connect to instruction/data memory</p></td>
</tr>
<tr class="row-even"><td><p>o_wb_mem_adr</p></td>
<td><p>32</p></td>
<td><p>out</p></td>
<td><p>Memory bus address</p></td>
</tr>
<tr class="row-odd"><td><p>o_wb_mem_dat</p></td>
<td><p>32</p></td>
<td><p>out</p></td>
<td><p>Memory bus data</p></td>
</tr>
<tr class="row-even"><td><p>o_wb_mem_sel</p></td>
<td><p>4</p></td>
<td><p>out</p></td>
<td><p>Memory bus write data byte select mask</p></td>
</tr>
<tr class="row-odd"><td><p>o_wb_mem_we</p></td>
<td><p>1</p></td>
<td><p>out</p></td>
<td><p>Memory bus write transaction</p></td>
</tr>
<tr class="row-even"><td><p>o_wb_mem_stb</p></td>
<td><p>1</p></td>
<td><p>out</p></td>
<td><p>Memory bus active strobe</p></td>
</tr>
<tr class="row-odd"><td><p>i_wb_mem_rdt</p></td>
<td><p>32</p></td>
<td><p>in</p></td>
<td><p>Memory bus read data</p></td>
</tr>
<tr class="row-even"><td><p>i_wb_mem_ack</p></td>
<td><p>1</p></td>
<td><p>in</p></td>
<td><p>Memory bus cycle acknowledged</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Extension interface</strong></p></td>
<td></td>
<td></td>
<td><p>Connect to peripheral controllers</p></td>
</tr>
<tr class="row-even"><td><p>o_wb_ext_adr</p></td>
<td><p>32</p></td>
<td><p>out</p></td>
<td><p>Data bus address</p></td>
</tr>
<tr class="row-odd"><td><p>o_wb_ext_dat</p></td>
<td><p>32</p></td>
<td><p>out</p></td>
<td><p>Data bus write data</p></td>
</tr>
<tr class="row-even"><td><p>o_wb_ext_sel</p></td>
<td><p>4</p></td>
<td><p>out</p></td>
<td><p>Data bus write data byte select mask</p></td>
</tr>
<tr class="row-odd"><td><p>o_wb_ext_we</p></td>
<td><p>1</p></td>
<td><p>out</p></td>
<td><p>Data bus write transaction</p></td>
</tr>
<tr class="row-even"><td><p>o_wb_ext_stb</p></td>
<td><p>1</p></td>
<td><p>out</p></td>
<td><p>Data bus active cycle</p></td>
</tr>
<tr class="row-odd"><td><p>i_wb_ext_rdt</p></td>
<td><p>32</p></td>
<td><p>in</p></td>
<td><p>Data bus return data</p></td>
</tr>
<tr class="row-even"><td><p>i_wb_ext_ack</p></td>
<td><p>1</p></td>
<td><p>in</p></td>
<td><p>Data bus return data valid</p></td>
</tr>
<tr class="row-odd"><td><p><strong>RF (SRAM) interface</strong></p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>o_rf_waddr</p></td>
<td><p>ceil(log2(regs*32/rf_width)</p></td>
<td><p>out</p></td>
<td><p>RF memory write address</p></td>
</tr>
<tr class="row-odd"><td><p>o_rf_wdata</p></td>
<td><p>rf_width</p></td>
<td><p>out</p></td>
<td><p>RF memory write data</p></td>
</tr>
<tr class="row-even"><td><p>o_rf_wen</p></td>
<td><p>1</p></td>
<td><p>out</p></td>
<td><p>RF memory write enable</p></td>
</tr>
<tr class="row-odd"><td><p>o_rf_raddr</p></td>
<td><p>ceil(log2(regs*32/rf_width)</p></td>
<td><p>out</p></td>
<td><p>RF memory read address</p></td>
</tr>
<tr class="row-even"><td><p>i_rf_rdata</p></td>
<td><p>rf_width</p></td>
<td><p>out</p></td>
<td><p>RF memory read data</p></td>
</tr>
<tr class="row-odd"><td><p>o_rf_ren</p></td>
<td><p>1</p></td>
<td><p>out</p></td>
<td><p>RF memory read enable</p></td>
</tr>
</tbody>
</table>
</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">SERV</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="datasheet.html">Datasheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals.html">Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="reservoir.html">Building systems with SERV</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2020, Olof Kindgren.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.3.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/servile.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>